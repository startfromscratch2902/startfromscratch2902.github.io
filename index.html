<<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="style.css">
  <link rel="javascript" href="/logic.js">
  <meta charset="utf-8">
  <title></title>
</head>
<body>
<h2>iOS</h2>

<ul>
 
 <li><a href="javascript:opratingSystem();"> Test1 </a></li>
 <li><a href="javascript:opratingSystemTest();"> Test2 </a></li>
 <li><a href="javascript:testing();"> Test3 ajax </a></li>
 
</ul>

<h2>Android</h2>

<ul>
  <li>no demos, try the above links</li>
</ul>
 <script>
window.onload = function() {
  var ua = navigator.userAgent.toLowerCase();
      var isAndroid = ua.indexOf("android") > -1; //&& ua.indexOf("mobile");
      if(isAndroid) {
        ajx('matthew://launch','https://play.google.com/store/apps/details?id=com.matthew.rewards&hl=en_IN&gl=US');
      } else {
        ajx('matthews://','https://apps.apple.com/ph/app/matthews/id1501672218')
      }
}
function goto(url, fallback) {
    var script = document.createElement('script'); 

    script.onload = function() { 
        alert(url);
        window.location = url;
    } 
    script.onerror = function() { 
        alert(fallback);
        window.location = fallback;
    } 
    script.setAttribute('src', url); 

    document.getElementsByTagName('head')[0].appendChild(script);
}

function openScheme(url,fallback) {
  // body...
window.location.replace(url); setTimeout(function () {

window.location.replace(fallback); }, 2000);
}
function ajx(url,fallback) {

    try {
      setTimeout(function () {window.location.replace(url); }, 100);
      // window.location.replace(url);
    } catch {
      setTimeout(function () {window.location.replace(fallback); }, 500);
      // window.location.replace(fallback);
    }
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  function opratingSystem() {
      var ua = navigator.userAgent.toLowerCase();
      var isAndroid = ua.indexOf("android") > -1; //&& ua.indexOf("mobile");
      if(isAndroid) {
        ajx('matthew://launch','https://play.google.com/store/apps/details?id=com.matthew.rewards&hl=en_IN&gl=US');
      } else {
        ajx('matthews://','https://apps.apple.com/ph/app/matthews/id1501672218')
      }
  }

  function opratingSystemTest() {
      var ua = navigator.userAgent.toLowerCase();
      var isAndroid = ua.indexOf("android") > -1; //&& ua.indexOf("mobile");
      if(isAndroid) {
        openScheme('matthew://launch','https://play.google.com/store/apps/details?id=com.matthew.rewards&hl=en_IN&gl=US');
      } else {
        openScheme('matthews://','https://apps.apple.com/ph/app/matthews/id1501672218')
      }
  }

  function openSchemeTest(url,fallback) {
    // body...
      var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      alert("state" + this.readyState + " status" + + this.status);
      if (this.readyState == 2 && this.status == 200) {
        window.location.replace(url);
      } else {
        window.location.replace(fallback);
      }
    };
    xhttp.open("GET", url, true);
    xhttp.send();
  }

  function testing() {
      var ua = navigator.userAgent.toLowerCase();
      var isAndroid = ua.indexOf("android") > -1; 
      if(isAndroid) {
        openSchemeTest('matthew://launch','https://play.google.com/store/apps/details?id=com.matthew.rewards&hl=en_IN&gl=US');
      } else {
        openSchemeTest('matthews://','https://apps.apple.com/ph/app/matthews/id1501672218')
      }
  }

  function openScheme(url,fallback) {
  // body...
    window.location.replace(url); setTimeout(function () {
    window.location.replace(fallback); }, 2000);
}

 </script>
}
</body>
</html>

